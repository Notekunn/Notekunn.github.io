{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/2019/01/19/tao-mot-name-card-don-gian-voi-nodejs/","result":{"data":{"markdownRemark":{"id":"54926ad0-b2ab-5736-88db-e2dccbc0444c","html":"<h1 id=\"tạo-một-name-card-đơn-giản-với-nodejs\" style=\"position:relative;\"><a href=\"#t%E1%BA%A1o-m%E1%BB%99t-name-card-%C4%91%C6%A1n-gi%E1%BA%A3n-v%E1%BB%9Bi-nodejs\" aria-label=\"tạo một name card đơn giản với nodejs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tạo một Name Card đơn giản với Node.js</h1>\n<p>Với một sinh viên công nghệ thông tin thì việc viết ra những dòng code để tạo ra những thứ mình thích thật tuyệt vời đúng không nào.\nHôm nay mình sẽ hướng dẫn các bạn tạo một name card đơn giản bằng Node.js như hình.</p>\n<p><img src=\"https://i.imgur.com/qAw4VrB.png\" alt=\"Hình minh họa\"></p>\n<h2 id=\"chuẩn-bị\" style=\"position:relative;\"><a href=\"#chu%E1%BA%A9n-b%E1%BB%8B\" aria-label=\"chuẩn bị permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chuẩn bị</h2>\n<p>Yêu cầu Node.js v10+.</p>\n<p>Chúng ta sử dụng các package:</p>\n<ul>\n<li>text2png : chuyển chữ sang dạng hình ảnh.</li>\n<li>jimp : xử lý các ảnh (cắt ghép, resize,v.v).</li>\n<li>fs : thao tác với file (mở, lưu file).</li>\n</ul>\n<p>Ngoài ra cần chuẩn bị các font, và ảnh background, avatar (nên lưu tất cả ảnh đuôi png).</p>\n<p>Mình đã tải lên tất cả các file cần thiết <a href=\"https://drive.google.com/drive/folders/12twvwjNKBkQZQzxkFOEJVDcKuAxFR0R2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tại đây</a>.</p>\n<h2 id=\"khởi-tạo-và-cài-đặt\" style=\"position:relative;\"><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-v%C3%A0-c%C3%A0i-%C4%91%E1%BA%B7t\" aria-label=\"khởi tạo và cài đặt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Khởi tạo và cài đặt</h2>\n<ul>\n<li>Tạo một thư mục chứa project, chạy lệnh npm init -y để tạo file package.json.</li>\n<li>Chạy các lệnh sau:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save jimp text2png\n<span class=\"token function\">mkdir</span> src <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">touch</span> index.js</code></pre></div>\n<ul>\n<li>Tải toàn bộ các file and folder trong link trên và paste vào thư mục src.</li>\n</ul>\n<h2 id=\"viết-code\" style=\"position:relative;\"><a href=\"#vi%E1%BA%BFt-code\" aria-label=\"viết code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Viết code</h2>\n<ul>\n<li>Viết vào file <code class=\"language-text\">index.js</code>.</li>\n</ul>\n<h3 id=\"import-các-thư-viện\" style=\"position:relative;\"><a href=\"#import-c%C3%A1c-th%C6%B0-vi%E1%BB%87n\" aria-label=\"import các thư viện permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Import các thư viện</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> jimp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jimp\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> textToPng <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text2png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//Mảng chứa các font path</span>\n<span class=\"token keyword\">const</span> fontPath <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/font/UTM Swiss 721 Black Condensed.ttf</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/font/UTM NguyenHa 02.ttf</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//Hàm writeFile viết dưới dạng Promise</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">writeFile</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/image/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//Các giá trị bạn có thể thay</span>\n<span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'Trần Đức Cường'</span><span class=\"token punctuation\">,</span>\n    studentCode<span class=\"token operator\">:</span> <span class=\"token string\">'CT030208'</span><span class=\"token punctuation\">,</span>\n    coin<span class=\"token operator\">:</span> <span class=\"token number\">1930</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"text-to-image\" style=\"position:relative;\"><a href=\"#text-to-image\" aria-label=\"text to image permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Text to image</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> filePng <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tên file để lưu</span>\n        data<span class=\"token operator\">:</span> <span class=\"token function\">textToPng</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">/*Text cần chuyển thành chữ */</span> <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            color<span class=\"token operator\">:</span> <span class=\"token string\">'#4c4c4e'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//Màu chữ</span>\n            font<span class=\"token operator\">:</span> <span class=\"token string\">'30.0px UTM_NH'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//Tên font và cỡ chữ</span>\n            localFontPath<span class=\"token operator\">:</span> fontPath<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//path font</span>\n            localFontName<span class=\"token operator\">:</span> <span class=\"token string\">'UTM_NH'</span> <span class=\"token comment\">//tên font</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">'studentCode'</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token operator\">:</span> <span class=\"token function\">textToPng</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>studentCode<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">'#5f66ee'</span><span class=\"token punctuation\">,</span> font<span class=\"token operator\">:</span> <span class=\"token string\">'28.0px UTM_NH'</span><span class=\"token punctuation\">,</span> localFontPath<span class=\"token operator\">:</span> fontPath<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> localFontName<span class=\"token operator\">:</span> <span class=\"token string\">'UTM_NH'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">'studentCode_bg'</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token operator\">:</span> <span class=\"token function\">textToPng</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Mã SV:\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">'#ff3cac'</span><span class=\"token punctuation\">,</span> font<span class=\"token operator\">:</span> <span class=\"token string\">'26.0px UTM_Swi'</span><span class=\"token punctuation\">,</span> localFontPath<span class=\"token operator\">:</span> fontPath<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> localFontName<span class=\"token operator\">:</span> <span class=\"token string\">'UTM_Swi'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">'coin'</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token operator\">:</span> <span class=\"token function\">textToPng</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>user<span class=\"token punctuation\">.</span>coin<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> xu</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">'#5f66ee'</span><span class=\"token punctuation\">,</span> font<span class=\"token operator\">:</span> <span class=\"token string\">'24.0px UTM_NH'</span><span class=\"token punctuation\">,</span> localFontPath<span class=\"token operator\">:</span> fontPath<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> localFontName<span class=\"token operator\">:</span> <span class=\"token string\">'UTM_NH'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">'coin_bg'</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token operator\">:</span> <span class=\"token function\">textToPng</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tài khoản:\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">'#ee41aa'</span><span class=\"token punctuation\">,</span> font<span class=\"token operator\">:</span> <span class=\"token string\">'24.0px UTM_Swi'</span><span class=\"token punctuation\">,</span> localFontPath<span class=\"token operator\">:</span> fontPath<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> localFontName<span class=\"token operator\">:</span> <span class=\"token string\">'UTM_Swi'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>filePng<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>writeFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//Lưu tất cả các file và chờ nó hoàn thành</span></code></pre></div>\n<h3 id=\"xử-lý-hình-ảnh\" style=\"position:relative;\"><a href=\"#x%E1%BB%AD-l%C3%BD-h%C3%ACnh-%E1%BA%A3nh\" aria-label=\"xử lý hình ảnh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Xử lý hình ảnh</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>filePng<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>writeFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//Các file cần load</span>\n        <span class=\"token keyword\">let</span> imgName <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'background.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'studentCode.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'studentCode_bg.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'coin.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'coin_bg.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'avatar.png'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>imgName<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> jimp<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/image/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//Load tất cả các file</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">allFileLoaded</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>background<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> studentCode<span class=\"token punctuation\">,</span> studentCode_bg<span class=\"token punctuation\">,</span> coin<span class=\"token punctuation\">,</span> coin_bg<span class=\"token punctuation\">,</span> avatar<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> allFileLoaded<span class=\"token punctuation\">;</span> <span class=\"token comment\">//đặt tên các biến chứa hình ảnh</span>\n        background\n            <span class=\"token punctuation\">.</span><span class=\"token function\">composite</span><span class=\"token punctuation\">(</span>studentCode_bg<span class=\"token punctuation\">,</span> <span class=\"token number\">285</span><span class=\"token punctuation\">,</span> <span class=\"token number\">190</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//Chèn chữ `MÃ SV` vào hình nền</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">composite</span><span class=\"token punctuation\">(</span>coin_bg<span class=\"token punctuation\">,</span> <span class=\"token number\">285</span><span class=\"token punctuation\">,</span> <span class=\"token number\">230</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//chèn chữ `Tài khoản` vào hình nền       </span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">composite</span><span class=\"token punctuation\">(</span>avatar<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span><span class=\"token number\">220</span><span class=\"token punctuation\">,</span> jimp<span class=\"token punctuation\">.</span><span class=\"token constant\">AUTO</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">45</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//Resize avatar và chèn vào background</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">composite</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token number\">285</span><span class=\"token punctuation\">,</span> <span class=\"token number\">145</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//chèn tên</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">composite</span><span class=\"token punctuation\">(</span>studentCode<span class=\"token punctuation\">,</span> <span class=\"token number\">370</span><span class=\"token punctuation\">,</span> <span class=\"token number\">190</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//chèn mã sv</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">composite</span><span class=\"token punctuation\">(</span>coin<span class=\"token punctuation\">,</span> <span class=\"token number\">395</span><span class=\"token punctuation\">,</span> <span class=\"token number\">235</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//chèn số tài khoản</span>\n        <span class=\"token keyword\">let</span> imageDelete <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'name.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'studentCode.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'studentCode_bg.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'coin.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'coin_bg.png'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//Lưu ảnh đã xử lý vào file result.png</span>\n        background<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/result.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            imageDelete<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                fs<span class=\"token punctuation\">.</span><span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/image/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//xóa các ảnh tạm đã lưu</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Done!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            process<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Chạy file <code class=\"language-text\">index.js</code> và tận hưởng thành quả.</p>\n<p>Chúc các bạn thành công.</p>","fields":{"slug":"/posts/2019/01/19/tao-mot-name-card-don-gian-voi-nodejs/","tagSlugs":["/tag/javascript/","/tag/programming/","/tag/tutorial/"]},"frontmatter":{"date":"2019-01-19T17:00:00.000Z","description":"Hướng dẫn tạo một name card đơn giản bằng Node.js","tags":["Javascript","Programming","Tutorial"],"title":"Tạo một Name Card đơn giản với Node.js","socialImage":null}}},"pageContext":{"slug":"/posts/2019/01/19/tao-mot-name-card-don-gian-voi-nodejs/"}},"staticQueryHashes":["251939775","401334301","825871152"]}